
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Javier Torres">
      
      
        <link rel="canonical" href="https://jrtorres.github.io/iks-cloudnativeworkshop/generatedContent/spring-boot-microservices-on-kubernetes/README-ko/">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.5">
    
    
      
        <title>README ko - IKS Cloud Native Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.77f3fd56.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback">
        <style>:root{--md-text-font-family:"IBM Plex Sans";--md-code-font-family:"IBM Plex Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spring-boot" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://jrtorres.github.io/iks-cloudnativeworkshop" title="IKS Cloud Native Workshop" class="md-header__button md-logo" aria-label="IKS Cloud Native Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IKS Cloud Native Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              README ko
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://jrtorres.github.io/iks-cloudnativeworkshop/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    iks-cloudnativeworkshop
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../workshop-setup/" class="md-tabs__link">
        Workshop Setup
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../kube101/" class="md-tabs__link">
        Kube 101 Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../kube101/Lab0/" class="md-tabs__link">
        Kube 101 Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../helm101/" class="md-tabs__link">
        Helm 101 Welcome
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../helm101/Lab0/" class="md-tabs__link">
        Helm 101 Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../app-modernization-cicd-lab-iks/" class="md-tabs__link">
        CI/CD Workshop
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link">
        Microservices Workshop
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://jrtorres.github.io/iks-cloudnativeworkshop" title="IKS Cloud Native Workshop" class="md-nav__button md-logo" aria-label="IKS Cloud Native Workshop">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    IKS Cloud Native Workshop
  </label>
  
    <div class="md-nav__source">
      
<a href="https://jrtorres.github.io/iks-cloudnativeworkshop/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    iks-cloudnativeworkshop
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        Welcome
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Welcome" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        About the workshop
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Workshop Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Workshop Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Workshop Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../workshop-setup/" class="md-nav__link">
        Setup
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Kube 101 Welcome
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kube 101 Welcome" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Kube 101 Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kube101/" class="md-nav__link">
        About the workshop
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Kube 101 Workshop
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kube 101 Workshop" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Kube 101 Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kube101/Lab0/" class="md-nav__link">
        Lab 0. Access a Kubernetes cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kube101/Lab1/" class="md-nav__link">
        Lab 1. Deploy your first application
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kube101/Lab2/" class="md-nav__link">
        Lab 2. Scale and update deployments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../kube101/Lab3/" class="md-nav__link">
        Lab 3. Build multi-tier applications
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Helm 101 Welcome
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Helm 101 Welcome" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Helm 101 Welcome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/" class="md-nav__link">
        About the workshop
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Helm 101 Workshop
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Helm 101 Workshop" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Helm 101 Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/Lab0/" class="md-nav__link">
        Lab 0. Installing Helm on IKS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/Lab1/" class="md-nav__link">
        Lab 1. Deploy with Helm
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/Lab2/" class="md-nav__link">
        Lab 2. Make changes with Helm
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/Lab3/" class="md-nav__link">
        Lab 3. Keeping track of the deployed application
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../helm101/Lab4/" class="md-nav__link">
        Lab 4. Share Helm Charts
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        CI/CD Workshop
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CI/CD Workshop" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          CI/CD Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../app-modernization-cicd-lab-iks/" class="md-nav__link">
        Jenkins Lab
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Microservices Workshop
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Microservices Workshop" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Microservices Workshop
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Deploy Microservices Lab
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    사전 준비 사항
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
    <nav class="md-nav" aria-label="Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    문제 해결
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://jrtorres.github.io/iks-cloudnativeworkshop/edit/master/docs/generatedContent/spring-boot-microservices-on-kubernetes/README-ko.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <p><a href="https://travis-ci.org/IBM/spring-boot-microservices-on-kubernetes"><img alt="Build Status" src="https://travis-ci.org/IBM/spring-boot-microservices-on-kubernetes.svg?branch=master" /></a>
<img alt="Bluemix Deployments" src="https://metrics-tracker.mybluemix.net/stats/13404bda8d87a6eca2c5297511ae9a5e/badge.svg" /></p>
<h1 id="spring-boot">쿠버네티스에 자바 Spring Boot 애플리케이션 빌드 및 배포하기<a class="headerlink" href="#spring-boot" title="Permanent link">&para;</a></h1>
<p><em>Read this in other languages: <a href="../">English</a>.</em></p>
<p>Spring Boot은 널리 사용되는 자바 마이크로서비스 프레임워크 입니다. Spring Cloud는 Java 애플리케이션 스택의 일부로 런타임 문제를 해결할 수 있는 풍부한 통합 라이브러리를 갖고 있으며 쿠버네티스는 polyglot 마이크로서비스를 실행할 수 있는 풍부한 기능을 제공합니다. 이 두 기술은 서로를 보완하고 있으며 Spring Boot 애플리케이션을 위한 훌륭한 플랫폼을 만듭니다.</p>
<p>이 코드에서는 쿠버네티스 위에 간단한 Spring Boot 애플리케이션을 배포하는 방법을 보여줍니다.  이 애플리케이션인 Office Space는 영화 <a href="http://www.imdb.com/title/tt0151804/">Office Space</a>에 등장하는 Michael Bolton의 가상의 앱 아이디어를 모방한 것입니다. 이 앱은 일반적으로 1센트 이하의 금액을 반올림 하는 방식 대신에 버림하여 별도의 은행 계좌에 저장하는 방식으로 이득을 취합니다.</p>
<p>이 애플리케이션은 Java 8/Spring Boot 마이크로서비스를 사용하여 이자를 계산하고 소숫점 이하의 금액은 데이터베이스에 저장합니다. 또 다른 Spring Boot 마이크로서비스인 알림 서비스는 계좌의 잔액이 $50,000 이상이 되면 이메일을 전송합니다. 이는 이자를 계산하는 Spring Boot 웹서버에 의해 트리거 됩니다. 앱의 Frontend는 Node.js 기반으로 만들어졌고 Spring Boot 앱에 의해 쌓인 현재 계좌의 잔액을 보여줍니다. Backend는 MySQL 데이터 베이스를 사용하여 계좌 잔액을 저장합니다.</p>
<p><img alt="spring-boot-kube" src="images/spring-boot-kube.png" /></p>
<h2 id="_1">사전 준비 사항<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>쿠버네티스 클러스터를 생성합니다. 로컬에서 테스트 하려면 <a href="https://kubernetes.io/docs/getting-started-guides/minikube">Minikube</a>에서, 클라우드에 배포하려면 <a href="https://github.com/IBM/container-journey-template">IBM Bluemix Container Service</a>에서 생성합니다. 이 코드는 Travis를 사용하여 <a href="https://console.ng.bluemix.net/docs/containers/cs_ov.html#cs_ov">Kubernetes Cluster from Bluemix Container Service</a>에서 정기적으로 테스트 합니다.</p>
<h2 id="steps">Steps<a class="headerlink" href="#steps" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#1-데이터베이스-서비스-생성">데이터베이스 서비스 생성</a><br />
1.1 <a href="#11-컨테이너에서-mysql-사용">컨테이너에서 MySQL 사용</a> 또는<br />
1.2 <a href="#12-bluemix-mysql-사용">Bluemix MySQL 사용</a>  </li>
<li><a href="#2-spring-boot-마이크로서비스-생성">Spring Boot 마이크로서비스 생성</a><br />
2.1 <a href="#21-maven으로-프로젝트-빌드">Maven으로 프로젝트 빌드</a><br />
2.2 <a href="#22-닥커-이미지-빌드-및-푸시">닥커 이미지 빌드 및 푸시</a><br />
2.3 <a href="#23-compute-interest-apiyaml-및-send-notificationyaml-수정">Spring Boot 서비스를 위한 yaml 파일 수정</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.3.1 <a href="#231-알림-서비스로-기본-이메일-서비스-사용-gmail">알림 서비스로 기본 이메일 서비스 사용</a> 또는<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.3.2 <a href="#232-알림-서비스로-openwhisk-actions-사용">알림 서비스로 OpenWhisk Actions 사용</a><br />
2.4 <a href="#24-spring-boot-마이크로서비스-배포">Spring Boot 마이크로서비스 배포</a>  </li>
<li><a href="#3-frontend-서비스-작성">Frontend 서비스 작성</a>  </li>
<li><a href="#4-트랜잭션-생성-서비스-작성">트랜잭션 생성 서비스 작성</a>  </li>
<li><a href="#5-애플리케이션-접근">애플리케이션 접근</a></li>
</ol>
<h4 id="_2"><a href="#문제-해결">문제 해결</a><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<h1 id="1">1. 데이터베이스 서비스 생성<a class="headerlink" href="#1" title="Permanent link">&para;</a></h1>
<p>백엔드 시스템은 MySQL 데이터베이스와 Spring Boot 애플리케이션으로 구성되어 있습니다. 각 마이크로서비스는 Deployment와 Service를 갖고 있습니다. Deployment는 각 마이크로서비스에 대해 시작된 Pod를 관리합니다. 서비스는 각 마이크로서비스에 대해 이름으로 dependency를 참조하도록 안정적인 DNS를 생성합니다.</p>
<ul>
<li>MySQL 데이터베이스를 생성하는 방법은 두가지가 있습니다.:
  <strong><a href="#11-컨테이너에서-mysql-사용">컨테이너에서 MySQL 사용</a></strong> <em>또는</em>
  <strong><a href="#12-bluemix-mysql-사용">Bluemix MySQL 사용</a></strong></li>
</ul>
<h2 id="11-mysql">1.1 컨테이너에서 MySQL 사용<a class="headerlink" href="#11-mysql" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>$ kubectl create -f account-database.yaml
service <span class="s2">&quot;account-database&quot;</span> created
deployment <span class="s2">&quot;account-database&quot;</span> created
</code></pre></div>
<p>기본 신임 정보는 이미 secrets.yaml에 base64로 인코딩 되어 있습니다.</p>
<blockquote>
<p>base64 인코딩은 신임 정보를 암호화하지는 않으므로 이 정보를 Github에 업로드 하지 마십시오.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>$ kubectl apply -f secrets.yaml
secret &quot;demo-credentials&quot; created
</code></pre></div>
<p><a href="#2-spring-boot-마이크로서비스-생성">Step 2</a>에서 계속 진행 하십시오.</p>
<h2 id="12-bluemix-mysql">1.2 Bluemix MySQL 사용<a class="headerlink" href="#12-bluemix-mysql" title="Permanent link">&para;</a></h2>
<p>https://console.ng.bluemix.net/catalog/services/compose-for-mysql를 통해 Bluemix에서 Compose for MySQL을 작성하십시오.
Service Credentials로 가서 신임 정보를 확인하십시오. MySQL의 Hostname, port, user 그리고 password가 신임 정보의 url에 있습니다. 다음의 형식으로 되어 있습니다.
<img alt="images" src="../images/mysqlservice.png" />
이 신임정보를 큐버네티스 클러스터에 Secret으로 적용해야 합니다. 이 값은 반드시 <code>base64</code>로 인코딩 되어 있어야 합니다. <code>./scripts/create-secrets.sh</code>를 사용하십시오. 신임 정보를 넣도록 입력을 받을 것입니다. 이 스크립트를 통해 신임 정보를 인코딩 하고 클러스터에 Secret으로 적용할 수 있습니다.
<div class="highlight"><pre><span></span><code>$ ./scripts/create-secrets.sh
Enter MySQL username:
admin
Enter MySQL password:
password
Enter MySQL host:
hostname
Enter MySQL port:
<span class="m">23966</span>
secret <span class="s2">&quot;demo-credentials&quot;</span> created
</code></pre></div></p>
<p><em>또한 <code>secrets.yaml</code> 파일을 수정하여 base64 인코딩된 신임정보를 직접 넣는 방법을 사용할 수 있습니다. 이 경우에는 <code>kubectl apply -f secrets.yaml</code> 를 수행하십시오.</em></p>
<p><a href="#2-spring-boot-마이크로서비스-생성">Step 2</a>에서 계속 진행 하십시오.</p>
<h1 id="2-spring-boot">2. Spring Boot 마이크로서비스 생성<a class="headerlink" href="#2-spring-boot" title="Permanent link">&para;</a></h1>
<p><a href="https://maven.apache.org/index.html">Maven이 설치되어 있어야 합니다.</a>.
Spring Boot 애플리케이션들을 수정하려면 Java 프로젝트와 닥커 이미지를 빌드하기 전에 해야 합니다.</p>
<p>Spring Boot 마이크로서비스는 <strong>Compute-Interest-API</strong> 와 <strong>Send-Notification</strong> 입니다.</p>
<p>**Compute-Interest-API**은 MySQL 데이터베이스를 사용하기위해 구성된 Spring Boot 앱입니다. 관련한 구성은 <code>spring.datasource.*</code>에 있는 application.properties에 위치해 있습니다.</p>
<p><em>compute-interest-api/src/main/resources/application.properties</em>
<div class="highlight"><pre><span></span><code>spring.datasource.url = jdbc:mysql://${MYSQL_DB_HOST}:${MYSQL_DB_PORT}/dockercon2017

# Username과 password
spring.datasource.username = ${MYSQL_DB_USER}
spring.datasource.password = ${MYSQL_DB_PASSWORD}
</code></pre></div></p>
<p><code>application.properties</code>는 MYSQL_DB_* 환경 변수를 사용하기 위해 구성됐습니다. 이는 <code>compute-interest-api.yaml</code> 파일에 정의되어 있습니다.
<em>compute-interest-api.yaml</em>
<div class="highlight"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
  <span class="nt">containers</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">anthonyamanse/compute-interest-api:secrets</span>
    <span class="nt">imagePullPolicy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Always</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">compute-interest-api</span>
    <span class="nt">env</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MYSQL_DB_USER</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">secretKeyRef</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo-credentials</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">username</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MYSQL_DB_PASSWORD</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">secretKeyRef</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo-credentials</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">password</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MYSQL_DB_HOST</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">secretKeyRef</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo-credentials</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">host</span>
      <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MYSQL_DB_PORT</span>
        <span class="nt">valueFrom</span><span class="p">:</span>
          <span class="nt">secretKeyRef</span><span class="p">:</span>
            <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo-credentials</span>
            <span class="nt">key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">port</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">containerPort</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div></p>
<p>이 YAML 파일은 이미 이전 단계에서 생성한 쿠버네티스 Secret으로부터 값을 얻도록 구성되어 있습니다. 이는 <code>application.properties</code>에 있는 Spring Boot 애플리케이션에서 사용될 것입니다.</p>
<p><strong>Send-Notification</strong> 은 gmail 그리고/또는 Slack을 통해 알림을 줄 수 있도록 구성되어 있습니다. 알림은 MySQL 데이터베이스의 계좌 잔액이 $50,000을 넘었을 때에 한번만 발송됩니다. 기본적으로는 gmail 옵션을 사용합니다. Event driven 기술을 사용할 수도 있습니다. 여기서는 <a href="http://openwhisk.org/">OpenWhisk</a>를 사용하여 이메일과 슬랙 메세지를 보냅니다. 알림 마이크로서비스로 OpenWhisk를 사용하려면 마이크로서비스 이미지를 빌드 및 배포 하기 전에 <a href="#232-알림-서비스로-openwhisk-actions-사용">여기</a> 스텝을 따르십시오. 이메일 알림 설정만 사용하려면 그냥 진행하십시오.</p>
<h2 id="21-maven">2.1. Maven으로 프로젝트 빌드<a class="headerlink" href="#21-maven" title="Permanent link">&para;</a></h2>
<p>Maven이 Java 프로젝트를 성공적으로 빌드하면, 각 폴더에 제공된 **Dockerfile**로 닥커 이미지를 빌드해야 합니다.</p>
<blockquote>
<p>Note: compute-interest-api는 시뮬레이션 목적으로 나머지 금액에 x100,000을 곱합니다. <code>src/main/java/officespace/controller/MainController.java</code>에서 <code>remainingInterest *= 100000</code>라인을 수정/제거할 수 있습니다. 또한 잔액이 $50,000을 넘길 때 알림을 전송하도록 되어 있습니다. <code>if (updatedBalance &gt; 50000 &amp;&amp; emailSent == false )</code> 라인에서 이 숫자를 변경하여 사용하십시오. 변경 사항을 저장하면 이제 프로젝트를 빌드하십시오.</p>
</blockquote>
<p><div class="highlight"><pre><span></span><code>Go to containers/compute-interest-api
$ mvn package

Go to containers/send-notification
$ mvn package
</code></pre></div>
<em>이 과정에서는 Bluemix 컨테이너 레지스트리를 사용합니다. <a href="https://docs.docker.com/datacenter/dtr/2.2/guides/user/manage-images/pull-and-push-images">닥커 허브</a>를 사용할 수도 있습니다.</em></p>
<h2 id="22">2.2 닥커 이미지 빌드 및 푸시<a class="headerlink" href="#22" title="Permanent link">&para;</a></h2>
<blockquote>
<p>Note: Bluemix 컨테이너 레지스트리로 이미지를 푸시합니다.</p>
</blockquote>
<p>Bluemix 컨테이너 레지스트리를 사용하려면 먼저 계정을 구성해야 합니다. <a href="https://developer.ibm.com/recipes/tutorials/getting-started-with-private-registry-hosted-by-ibm-bluemix/">이 튜토리얼</a>을 따르십시오.</p>
<p><a href="https://hub.docker.com">Docker Hub</a>를 사용할 수도 있습니다.</p>
<div class="highlight"><pre><span></span><code>$ docker build -t registry.ng.bluemix.net/&lt;namespace&gt;/compute-interest-api .
$ docker build -t registry.ng.bluemix.net/&lt;namespace&gt;/send-notification .
$ docker push registry.ng.bluemix.net/&lt;namespace&gt;/compute-interest-api
$ docker push registry.ng.bluemix.net/&lt;namespace&gt;/send-notification
</code></pre></div>
<h2 id="23-compute-interest-apiyaml-send-notificationyaml">2.3 <em>compute-interest-api.yaml</em> 및 <em>send-notification.yaml</em> 수정<a class="headerlink" href="#23-compute-interest-apiyaml-send-notificationyaml" title="Permanent link">&para;</a></h2>
<p>이미지를 성공적으로 푸시했으면 yaml 파일을 수정하여 푸시한 이미지를 사용하도록 변경합니다.
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">// compute-interest-api.yaml</span>
  <span class="l l-Scalar l-Scalar-Plain">spec</span><span class="p p-Indicator">:</span>
    <span class="nt">containers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">registry.ng.bluemix.net/&lt;namespace&gt;/compute-interest-api</span> <span class="c1"># 푸시한 이미지 이름으로 대체하십시오.</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">// send-notification.yaml</span>
  <span class="l l-Scalar l-Scalar-Plain">spec</span><span class="p p-Indicator">:</span>
    <span class="nt">containers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">registry.ng.bluemix.net/&lt;namespace&gt;/send-notification</span> <span class="c1"># 푸시한 이미지 이름으로 대체하십시오.</span>
</code></pre></div>
<p>두가지 타입의 알림이 가능합니다.
<a href="#231-알림-서비스로-기본-이메일-서비스-사용-gmail">2.3.1 Use default email service</a>
<strong>또는</strong>
<a href="#232-알림-서비스로-openwhisk-actions-사용">2.3.2 Use OpenWhisk Actions</a>.</p>
<h3 id="231-gmail">2.3.1 알림 서비스로 기본 이메일 서비스 사용 (gmail)<a class="headerlink" href="#231-gmail" title="Permanent link">&para;</a></h3>
<p><code>send-notification.yaml</code> 에서 **환경 변수**를 수정하십시오.:
<div class="highlight"><pre><span></span><code>    <span class="nt">env</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GMAIL_SENDER_USER</span>
       <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="s">&#39;username@gmail.com&#39;</span> <span class="c1"># 이메일을 전송할 gmail로 변경하십시오.</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GMAIL_SENDER_PASSWORD</span>
       <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="s">&#39;password&#39;</span> <span class="c1"># 위에 입력한 gmail의 패스워드로 변경하십시오.</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EMAIL_RECEIVER</span>
       <span class="l l-Scalar l-Scalar-Plain">value</span><span class="p p-Indicator">:</span> <span class="s">&#39;sendTo@gmail.com&#39;</span> <span class="c1"># 수신자의 이메일 주소로 변경하십시오.</span>
</code></pre></div></p>
<p>이제 <a href="#24-spring-boot-마이크로서비스-배포">Step 2.4</a>를 진행하십시오.</p>
<h3 id="232-openwhisk-actions">2.3.2 알림 서비스로 OpenWhisk Actions 사용<a class="headerlink" href="#232-openwhisk-actions" title="Permanent link">&para;</a></h3>
<p>이 섹션에서 필요한 것들:
* Slack 팀의 <a href="https://api.slack.com/incoming-webhooks">Slack Incoming Webhook</a>.
* <a href="https://console.ng.bluemix.net/openwhisk/">OpenWhisk CLI</a>를 사용하기 위해 **Bluemix 계정**이 필요합니다.</p>
<h4 id="2321-actions">2.3.2.1 Actions 생성<a class="headerlink" href="#2321-actions" title="Permanent link">&para;</a></h4>
<p>이 리파지토리의 최상위 디렉토리에는 OpenWhisk Actions를 생성하는데 필요한 코드가 있습니다. 아직 OpenWhisk CLI를 설치하지 않았다면 먼저 <a href="https://console.ng.bluemix.net/openwhisk/">여기</a>에서 설치하십시오.</p>
<p><code>wsk</code> 명령을 사용해서 OpenWhisk Actions를 새엇ㅇ할 수 있습니다. Action을 생성하는 문법은 <code>wsk action create &lt; action_name &gt; &lt; source code for action&gt; [add --param for optional Default parameters]</code> 입니다.</p>
<ul>
<li>**Slack 알림**을 보내기 위한 Action 생성
<div class="highlight"><pre><span></span><code>$ wsk action create sendSlackNotification sendSlack.js --param url https://hooks.slack.com/services/XXXX/YYYY/ZZZZ
Replace the url with your Slack team<span class="err">&#39;</span>s incoming webhook url.
</code></pre></div></li>
<li>**Gmail 알림**을 전송하기 위한 Action 생성
<div class="highlight"><pre><span></span><code>$ wsk action create sendEmailNotification sendEmail.js
</code></pre></div></li>
</ul>
<h4 id="2322-actions">2.3.2.2 Actions 테스트<a class="headerlink" href="#2322-actions" title="Permanent link">&para;</a></h4>
<p>다음을 사용하여 OpenWhisk Actions를 테스트할 수 있습니다.
 <code>wsk action invoke [action name] [add --param to pass  parameters]</code></p>
<ul>
<li>슬랙 알림 호출하기
<div class="highlight"><pre><span></span><code>$ wsk action invoke sendSlackNotification --param text <span class="s2">&quot;Hello from OpenWhisk&quot;</span>
</code></pre></div></li>
<li>이메일 알림 호출하기
<div class="highlight"><pre><span></span><code>$ wsk action invoke sendEmailNotification --param sender <span class="o">[</span>sender<span class="s1">&#39;s email] --param password [sender&#39;</span>s password<span class="o">]</span>--param receiver <span class="o">[</span>receiver<span class="err">&#39;</span>s email<span class="o">]</span> --param subject <span class="o">[</span>Email subject<span class="o">]</span> --param text <span class="o">[</span>Email Body<span class="o">]</span>
</code></pre></div>
각각의 명령을 통해 슬랙 메세지와 이메일을 받을 수 있습니다.</li>
</ul>
<h4 id="2323-actions-rest-api">2.3.2.3 Actions에 대한 REST API 생성<a class="headerlink" href="#2323-actions-rest-api" title="Permanent link">&para;</a></h4>
<p><code>wsk api create</code> 명령을 사용하여 REST API 엔드포인트와 생성된 Actions를 맵핑할 수 있습니다. 이 명령을 사용하는 문법은 <code>wsk api create [base-path] [api-path] [verb (GET PUT POST etc)] [action name]</code> 입니다.</p>
<ul>
<li>**Slack 알림**에 대한 엔드포인트 생성
<div class="highlight"><pre><span></span><code>$ wsk api create /v1 /slack POST sendSlackNotification
ok: created API /v1/email POST <span class="k">for</span> action /_/sendEmailNotification
https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/slack
</code></pre></div></li>
<li>**Gmail 알림**에 대한 엔드포인트 생성
<div class="highlight"><pre><span></span><code>$ wsk api create /v1 /email POST sendEmailNotification
ok: created API /v1/email POST <span class="k">for</span> action /_/sendEmailNotification
https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/email
</code></pre></div></li>
</ul>
<p>다음 명령으로 생성한 API 목록을 확인할 수 있습니다.:
<div class="highlight"><pre><span></span><code>$ wsk api list
ok: APIs
Action                                      Verb  API Name  URL
/Anthony.Amanse_dev/sendEmailNotificatio    post       /v1  https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/email
/Anthony.Amanse_dev/testDefault             post       /v1  https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/slack
</code></pre></div></p>
<p>각자의 API URL을 편한 방법으로 기록해 둡니다. 이 URL은 다음 단계에서 다시 사용됩니다.</p>
<h4 id="2324-rest-api-url">2.3.2.4 REST API Url 테스트<a class="headerlink" href="#2324-rest-api-url" title="Permanent link">&para;</a></h4>
<ul>
<li>**Slack 알림**의 엔드포인트를 테스트 합니다. URL 부분을 각자의 API URL로 대체하십시오.
<div class="highlight"><pre><span></span><code>$ curl -X POST -d <span class="s1">&#39;{ &quot;text&quot;: &quot;Hello from OpenWhisk&quot; }&#39;</span> https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/slack
</code></pre></div>
<img alt="Slack Notification" src="../images/slackNotif.png" /></li>
<li><strong>Gmail 알림**의 엔드포인트를 테스트 합니다. URL 부분을 각자의 API URL로 대체하십시오. **sender, password, receiver, subject</strong> 파라미터의 값을 각자의 값으로 대체하십시오.
<div class="highlight"><pre><span></span><code>$ curl -X POST -d <span class="s1">&#39;{ &quot;text&quot;: &quot;Hello from OpenWhisk&quot;, &quot;subject&quot;: &quot;Email Notification&quot;, &quot;sender&quot;: &quot;testemail@gmail.com&quot;, &quot;password&quot;: &quot;passwordOfSender&quot;, &quot;receiver&quot;: &quot;receiversEmail&quot; }&#39;</span> https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/email
</code></pre></div>
<img alt="Email Notification" src="../images/emailNotif.png" /></li>
</ul>
<h4 id="2325-rest-api-url-yaml">2.3.2.5 REST API Url을 yaml 파일에 추가<a class="headerlink" href="#2325-rest-api-url-yaml" title="Permanent link">&para;</a></h4>
<p>API가 잘 작동하는 것을 테스트 한 후에는 이 URL을 <code>send-notification.yaml</code> file 에 입력합니다.
<div class="highlight"><pre><span></span><code><span class="nt">env</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GMAIL_SENDER_USER</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;username@gmail.com&#39;</span> <span class="c1"># 발신자의 이메일</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GMAIL_SENDER_PASSWORD</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;password&#39;</span> <span class="c1"># 발신자 이메일의 password</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">EMAIL_RECEIVER</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;sendTo@gmail.com&#39;</span> <span class="c1"># 수신자의 이메일</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OPENWHISK_API_URL_SLACK</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/slack&#39;</span> <span class="c1"># Slack 알림의 API 엔드포인트 URL</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">SLACK_MESSAGE</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;Your</span><span class="nv"> </span><span class="s">balance</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">over</span><span class="nv"> </span><span class="s">$50,000.00&#39;</span> <span class="c1"># 메세지</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OPENWHISK_API_URL_EMAIL</span>
  <span class="nt">value</span><span class="p">:</span> <span class="s">&#39;https://service.us.apiconnect.ibmcloud.com/gws/apigateway/api/.../v1/email&#39;</span> <span class="c1"># 이메일 알림의 API 엔드포인트 URL</span>
</code></pre></div></p>
<h2 id="24-spring-boot">2.4 Spring Boot 마이크로서비스 배포<a class="headerlink" href="#24-spring-boot" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code>$ kubectl create -f compute-interest-api.yaml
service <span class="s2">&quot;compute-interest-api&quot;</span> created
deployment <span class="s2">&quot;compute-interest-api&quot;</span> created
</code></pre></div>
<div class="highlight"><pre><span></span><code>$ kubectl create -f send-notification.yaml
service <span class="s2">&quot;send-notification&quot;</span> created
deployment <span class="s2">&quot;send-notification&quot;</span> created
</code></pre></div></p>
<h1 id="3-frontend">3. Frontend 서비스 작성<a class="headerlink" href="#3-frontend" title="Permanent link">&para;</a></h1>
<p>UI는 Node.js 앱으로 전체 계좌의 잔액을 보여줍니다.
<strong>블루믹스의 MySQL 데이터베이스를 사용중이면, 환경 변수를 <code>account-summary.yaml</code> 파일에 넣어야 합니다. 블루믹스의 MySQL을 사용하지 않는다면 빈 상태로 두십시오. 이는 <a href="#1-데이터베이스-서비스-생성">Step 1</a>에서 이미 했습니다.</strong></p>
<ul>
<li>*Node.js**기반 Frontend UI 생성:
<div class="highlight"><pre><span></span><code>$ kubectl create -f account-summary.yaml
service <span class="s2">&quot;account-summary&quot;</span> created
deployment <span class="s2">&quot;account-summary&quot;</span> created
</code></pre></div></li>
</ul>
<h1 id="4">4. 트랜잭션 생성 서비스 작성<a class="headerlink" href="#4" title="Permanent link">&para;</a></h1>
<p>트랜잭션 생성 서비스는 Python 앱으로 축적된 이자로 랜덤한 트랜잭션 생성합니다.
* 트랜잭션 생성을 위한 <strong>Python</strong> 앱 작성:
<div class="highlight"><pre><span></span><code>$ kubectl create -f transaction-generator.yaml
service <span class="s2">&quot;transaction-generator&quot;</span> created
deployment <span class="s2">&quot;transaction-generator&quot;</span> created
</code></pre></div></p>
<h1 id="5">5. 애플리케이션 접근<a class="headerlink" href="#5" title="Permanent link">&para;</a></h1>
<p>Cluster IP와 NodePort를 통해 애플리케이션에 퍼블릭 네트워크로 접근할 수 있습니다. NodePort는 **30080**입니다.</p>
<ul>
<li>
<p>IP 찾기:
<div class="highlight"><pre><span></span><code>$ bx cs workers &lt;cluster-name&gt;
ID                                                 Public IP        Private IP      Machine Type   State    Status   
kube-dal10-paac005a5fa6c44786b5dfb3ed8728548f-w1   <span class="m">169</span>.47.241.213   <span class="m">10</span>.177.155.13   free           normal   Ready  
</code></pre></div></p>
</li>
<li>
<p>account-summary 서비스의 NodePort 찾기:
<div class="highlight"><pre><span></span><code>$ kubectl get svc
NAME                    CLUSTER-IP     EXTERNAL-IP   PORT<span class="o">(</span>S<span class="o">)</span>                                                                      AGE
...
account-summary         <span class="m">10</span>.10.10.74    &lt;nodes&gt;       <span class="m">80</span>:30080/TCP                                                                 2d
...
</code></pre></div></p>
</li>
<li>브라우저에서, <code>http://&lt;your-cluster-IP&gt;:30080</code>에 접속하십시오.
<img alt="Account-balance" src="../images/balance.png" /></li>
</ul>
<h2 id="_3">문제 해결<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<ul>
<li>다시 시작하려면 모두 삭제하십시오. <code>kubectl delete svc,deploy -l app=office-space</code></li>
</ul>
<h2 id="_4">참조<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/jzaccone">John Zaccone</a> - <a href="https://github.com/jzaccone/office-space-dockercon2017">office space app deployed via Docker</a>의 원 저자.</li>
<li>Office Space 앱은 1999년도 영화 Office Space의 컨셉에 기반했습니다.</li>
</ul>
<h2 id="_5">라이센스<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a></p>
<h1 id="_6">정보 사용 안내<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h1>
<p>이 패키지가 포함 된 샘플 쿠버네티스 Yaml 파일은 <a href="https://www.bluemix.net/">IBM Cloud</a> 및 기타 쿠버네티스 플랫폼에 대한 배치를 추적하도록 구성 될 수 있습니다. 다음 정보는 배포시마다 <a href="https://github.com/IBM/metrics-collector-service">배치 추적 서비스</a>로 전송됩니다.:</p>
<ul>
<li>쿠버네티스 클러스터 제공자 (<code>Bluemix,Minikube 등</code>)</li>
<li>쿠버네티스 Machine ID (<code>MachineID</code>)</li>
<li>이 쿠버네티스 Job의 환경 변수</li>
</ul>
<p>이 데이터는 샘플 애플리케이션의 yaml 파일의 쿠버네티스 Job으로부터 수집됩니다. 이 데이터는 IBM에서 지속적으로 더 나은 컨텐츠를 제공하기 위해 사용됩니다. 예제의 유용성을 측정하기 위해 IBM Cloud로 배포되는 샘플 애플리케이션의 배포를 관련된 측정 항목을 추적하는데에 사용합니다.배포 추적 서비스를 핑하는 코드가 포함 된 샘플 응용 프로그램의 배포 만 추적됩니다.</p>
<h2 id="_7">배포 추적 비활성화<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<p><code>account-summary.yaml</code> 파일의 끝 부분에 있는 쿠버네티스 Job 부분을 주석 처리 하거나 삭제하십시오.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IBM Developer
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ibm" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/ibmdeveloper" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/company/ibm/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.youtube.com/user/developerworks" target="_blank" rel="noopener" title="www.youtube.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://dev.to/ibmdeveloper" target="_blank" rel="noopener" title="dev.to" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35 3.88-2.9 5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06zM404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8zM154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28l.01 70.93zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19l-.01 29.52zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58l-38.46 144.8z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5cf3e710.min.js"></script>
      
    
  </body>
</html>